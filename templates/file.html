<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>File Processing</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 10px;
        }

        h1, h2 {
            margin-bottom: 10px;
        }

        form {
            margin-bottom: 2px;
            display: flex;
            flex-wrap: wrap;
            gap: 100px; /* Adjust the gap between form elements */
        }

        label, input, select {
            display: block;
            margin-bottom: 5px; /* Adjust the margin bottom to reduce space */
        }

        #extracted-text {
            display:flex;
            flex-direction: column;
            justify-content: center;
            align-items: flex-start;
            border: 1px solid #ccc;
            padding: 10px;
            margin-bottom: 20px;
        }

       
        audio {
            margin-top: 20px;
        }

        .form-input {
            flex-shrink: 0 0 33%; /* Adjust the width as needed */
            margin-right: 1%; /* Adjust the gapbetween inputs */
        }
    </style>
</head>
<body>
    <title>File Processing</title>
    <style>
        form {
            display: flex;
            flex-wrap: wrap;
            gap: 10px; /* Adjust the gap as needed */
        }

        .form-input {
            flex: 1;
            display: flex;
            align-items: center;
        }

        label {
            margin-right: 5px; /* Adjust the margin as needed for spacing between label and input */
        }

        input, select {
            width: 75%; /* Make inputs take up full width */
        }

        input[type="submit"] {
            flex: 0; /* Reset flex property for the submit button */
        }
    </style>
</head>
<body>
    <h1>File Processing</h1>
    <form action="{{ url_for('summarization_file') }}" method="POST" enctype="multipart/form-data">

        <div class="form-input">
            <label for="files"></label>
            <input type="file" name="file" id="files" accept=".pdf, .txt, .docx" multiple required>
        </div>

        <div class="form-input">
            <label for="sentences_count"></label>
            <input type="number" name="sentences_count" value="" placeholder="Enter Sentences Count" required>
        </div>

        <div class="form-input">
            <label for="target_language"></label>
            <select name="target_language" id="target_language" class="initial-placeholder">
                <option value="" disabled selected hidden>Choose a language...</option>
                {% for lang_name, lang_code in language_mapping.items() %}
                    <option value="{{ lang_code }}">{{ lang_name }}</option>
                {% endfor %}
            </select>
        </div>

        <div class="form-input">
            <label for="translation_choice"></label>
            <select name="translation_choice" id="target_language" class="initial-placeholder" required>
                <option value="" disabled selected hidden>translation_choice?</option>
                <option value="yes">yes</option>
                <option value="no">No</option>
            </select>
        </div>

        <input type="submit" value="Process">
    </form>
</body>
</html>
    

    <h1>Result</h1>
    <div id="extracted-text">
        <h2>Extracted Text</h2>
        <p>{{ extracted_text }}</p>
    </div>

    <div id="extracted-text" >
        
        <h2>Summarized Text</h2>
        <p>{{ summarized_text }}</p>
        <a href="{{ url_for('download_pdf', filename='summarized_text.pdf', summarized_text=summarized_text) }}" download="summarized_text.pdf">Download as PDF</a>
    </div>

    <div id="extracted-text">
        <h2>Translated Text</h2>
        <p>{{ translated_text }}</p>
        <audio controls>
            <source src="data:audio/mpeg;base64,{{ audio_data }}" type="audio/mpeg">
            Your browser does not support the audio element.
        </audio>
    </div>
<script>
        // Function to load content into main-content div
        function loadContent(url) {
            fetch(url)
                .then(response => response.text())
                .then(html => {
                    document.getElementById('main-content').innerHTML = html;
                })
                .catch(error => console.error('Error loading content:', error));
        }

        // Add event listeners to the buttons to load corresponding content
        document.getElementById('btn_summarization').addEventListener('click', function () {
            loadContent('{{ url_for("summarization_file") }}');
        });
        // Add similar event listeners for other buttons as needed
    </script>
</body>
</html>